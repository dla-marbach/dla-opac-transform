# Verknüpfte Bestandsdatensätze ermittelt über zugehörige Exemplare
# synchron zu item_id_mv, mehrere verknüpfte Informationen getrennt mit ␝ (U+241D)
- op: core/column-addition
  engineConfig:
    facets: []
    mode: row-based
  baseColumnName: id
  expression: |
    grel:
    forNonBlank(
      forEach(
        value.cross('au','manifestation_id'),
        r,
        forNonBlank(
          r.cells['collection_id_mv'].value,
          x,
          x.replace('␟','␝'),
          '␣'
        )
      ).join('␟'),
      x,
      if(
        isNonBlank(x.replace(/␟|␝|␣/,'')),
        x,
        null
      ),
      null
    )
  newColumnName: item_collection_id_mv
  columnInsertIndex: 2
- op: core/column-addition
  engineConfig:
    facets: []
    mode: row-based
  baseColumnName: id
  expression: |
    grel:
    forNonBlank(
      forEach(
        value.cross('au','manifestation_id'),
        r,
        forNonBlank(
          r.cells['collection_display_mv'].value,
          x,
          x.replace('␟','␝'),
          '␣'
        )
      ).join('␟'),
      x,
      if(
        isNonBlank(x.replace(/␟|␝|␣/,'')),
        x,
        null
      ),
      null
    )
  newColumnName: item_collection_display_mv
  columnInsertIndex: 2